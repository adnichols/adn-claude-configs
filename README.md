# Claude Code Configuration Repository

A comprehensive Claude Code configuration system that provides specialized agents, custom commands, and complete development workflows for building software with AI assistance.

## ğŸš€ Quick Start

### Installation

This repository supports installation for both **Claude Code** and **Codex**.

#### Option 1: Install to a Project

```bash
# Clone this repository (if not already done)
git clone <repository-url>
cd adn-claude-configs

# Install Python dependencies for docs-fetch commands
pip3 install -r requirements.txt

# Install to your project
cd /path/to/your/project

# Install Claude Code only
bash /path/to/adn-claude-configs/install.sh --claude

# Install Codex only
bash /path/to/adn-claude-configs/install.sh --codex

# Install both
bash /path/to/adn-claude-configs/install.sh --all
```

#### Option 2: Install Globally (to Home Directory)

```bash
# Install to ~/.claude and ~/.codex for global access
bash /path/to/adn-claude-configs/install.sh --all ~
```

This creates `.claude/` and `.codex/` directories with all agents, commands/prompts, and configurations. Codex prompts are also mirrored to `~/.codex/prompts` (the project copy is cleaned up) so the CLI can use them from any trusted project.

### Updating Existing Installations

To sync the latest changes from this repository, simply run the install script again:

```bash
cd /path/to/your/project
bash /path/to/adn-claude-configs/install.sh --all
```

The install script auto-detects existing installations and:
- Updates agents, commands/prompts, and scripts
- Cleans up legacy directory structures (flattens nested commands)
- Preserves your local settings and configuration files
- Skips CLAUDE.md and CODEX.md (generated by codex)
- Mirrors Codex prompts to `~/.codex/prompts` for global CLI access

## ğŸ§  Fidelity-Preserving System

This repository features a **Fidelity-Preserving System** that automatically:

- **Preserves exact scope** from requirements through implementation
- **Uses fidelity-preserving agents** for implementation and quality review
- **Prevents scope creep** by maintaining strict adherence to specifications
- **Ensures quality** through comprehensive validation while staying within scope
- **Unified task processor** (`/3:process-tasks`) works with both PRD and spec workflows, auto-detecting source type

### Agent Types

| Purpose | Agent Type | Validation Requirements |
|---------|------------|------------------------|
| **Implementation** | `developer-fidelity` | Lint + Build + Secrets + Unit Tests |
| **Quality Review** | `quality-reviewer-fidelity` | Production readiness validation |
| **Fidelity Check** | `fidelity-reviewer` | Specification compliance validation |

The system emphasizes scope preservation and exact requirement implementation over complexity-based branching.

## ğŸ“ Repository Structure

```
adn-claude-configs/
â”œâ”€â”€ agents/                   # Source agents (maintained here)
â”‚   â”œâ”€â”€ developer-fidelity.md      # Exact scope implementation
â”‚   â”œâ”€â”€ quality-reviewer-fidelity.md # Fidelity-preserving quality review
â”‚   â”œâ”€â”€ fidelity-reviewer.md       # Specification compliance validation
â”‚   â””â”€â”€ [other specialized agents] # Additional agents for specific tasks
â”œâ”€â”€ commands/                 # Source commands (maintained here) - FLAT STRUCTURE
â”‚   â”œâ”€â”€ 3:process-tasks.md        # Unified task processor (PRD & spec)
â”‚   â”œâ”€â”€ prd:1:create-prd.md       # PRD creation with scope preservation
â”‚   â”œâ”€â”€ prd:2:gen-tasks.md        # Task generation from PRDs
â”‚   â”œâ”€â”€ spec:1:create-spec.md     # Specification creation from research
â”‚   â”œâ”€â”€ spec:2:gen-tasks.md       # Task generation from specs
â”‚   â”œâ”€â”€ doc:fetch.md              # Fetch documentation
â”‚   â”œâ”€â”€ simplify:create-plan.md   # Code simplification planning
â”‚   â””â”€â”€ _lib/                     # Helper scripts for doc:fetch
â”œâ”€â”€ claude/                   # Claude Code installable configuration
â”‚   â”œâ”€â”€ agents/              # Agents (copied from source)
â”‚   â”œâ”€â”€ commands/            # Commands (copied from source)
â”‚   â”œâ”€â”€ scripts/             # Shared utility scripts
â”‚   â”œâ”€â”€ settings.local.json  # Claude Code settings template
â”‚   â”œâ”€â”€ mcp-servers.json     # MCP server definitions
â”‚   â””â”€â”€ README.md            # Claude-specific documentation
â”œâ”€â”€ codex/                    # Codex installable configuration
â”‚   â”œâ”€â”€ prompts/             # Prompts (adapted from commands)
â”‚   â”œâ”€â”€ scripts/             # Shared utility scripts
â”‚   â”œâ”€â”€ config.toml          # Codex configuration template
â”‚   â”œâ”€â”€ mcp-servers.toml     # MCP server definitions
â”‚   â””â”€â”€ README.md            # Codex-specific documentation
â”œâ”€â”€ install.sh                # Install and update script (auto-detects existing installs)
â”œâ”€â”€ tools/                    # Distributable CLI tools
â”‚   â””â”€â”€ ltui/                # Linear CLI for AI agents
â”‚       â”œâ”€â”€ src/             # TypeScript source code
â”‚       â”œâ”€â”€ bin/ltui         # CLI entrypoint
â”‚       â”œâ”€â”€ package.json     # Dependencies
â”‚       â””â”€â”€ README.md        # Tool documentation
â”œâ”€â”€ skills/                   # Claude Code skills
â”‚   â””â”€â”€ linear/              # Linear integration skill for ltui
â”‚       â”œâ”€â”€ SKILL.md         # Skill definition
â”‚       â””â”€â”€ references/      # Command references
â”œâ”€â”€ docs/                     # Fetched documentation
â”œâ”€â”€ tasks/                    # Generated PRDs, specs, and task lists
â”œâ”€â”€ .claude/                  # Local example (bind mount)
â””â”€â”€ CLAUDE.md                 # Repository-specific guidance
```

**Key Directories:**

- **agents/** and **commands/** - Source of truth for all agents and commands (commands use flat structure with colon-delimited namespacing)
- **claude/** and **codex/** - Installable configurations for each tool
- **tools/** - Distributable CLI tools (installed globally via `--tools`)
- **skills/** - Claude Code skills (installed to ~/.claude/skills/ via `--skills`)
- **install.sh** - Single script for installation and updates (auto-detects existing installations)

## ğŸ”§ Distributed Tools

This repository includes CLI tools designed for AI-assisted development workflows.

### ltui - Linear CLI for AI Agents

A token-efficient Linear issue tracker CLI optimized for AI coding agents. Provides deterministic, compact outputs perfect for LLM consumption.

**Installation:**

```bash
# Install ltui and its Claude Code skill
cd /path/to/adn-claude-configs
./install.sh --tools --skills

# Or install everything at once
./install.sh --all
```

**Requirements:**
- [Bun](https://bun.sh) runtime (for building and running)
- Linear API key (obtain from linear.app/settings/api)
- `~/.bun/bin` in your PATH (add to ~/.zshrc or ~/.bashrc): `export PATH="$HOME/.bun/bin:$PATH"`

**Features:**
- **Multiple output formats**: TSV (default, most token-efficient), table, detail, JSON
- **Issue management**: Create, update, comment, relate issues
- **Project operations**: List, view, align repositories with Linear projects
- **Team workflows**: Manage teams, labels, users, cycles
- **Integrated Claude skill**: The `linear` skill enables Claude Code to use ltui automatically

**Quick Start:**

```bash
# Configure authentication
ltui auth add --name default --key lin_api_...

# List your issues
ltui issues list --assignee me --state "Todo" --format table

# Create an issue
ltui issues create --team ENG --title "Add new feature" --description @spec.md

# View issue with full context
ltui issues view ENG-123 --format detail

# Update issue state
ltui issues update ENG-123 --state "In Progress" --assignee me
```

**Usage in Claude Code:**

After installation, Claude Code automatically has access to the `linear` skill and can interact with Linear on your behalf:

```
User: "Create a Linear issue for implementing OAuth login"
Claude: [Uses ltui via the linear skill to create the issue]

User: "What are my current todos in Linear?"
Claude: [Uses ltui to list issues assigned to you in Todo state]
```

**Documentation:**
- Tool README: `tools/ltui/README.md`
- Technical spec: `tools/ltui/SPEC.md`
- Skill documentation: `skills/linear/SKILL.md`
- Complete command reference: `skills/linear/references/ltui-command-reference.md`

**Configuration:**
- Global: `~/.config/ltui/config.json` (profiles and API keys)
- Per-project: `.ltui.json` (team/project defaults)
- Cache: `~/.config/ltui/cache.json` (5-minute TTL for entity lookups)

## ğŸ¤– Available Agents

The system uses carefully configured agents that focus on exact scope implementation and quality validation.

### Core Implementation Agents

**`@developer-fidelity`** - Fidelity-preserving implementation
- Implements only what's explicitly specified in source documents
- Comprehensive unit and integration tests as required
- Follows project standards from CLAUDE.md
- Zero linting violations enforced
- Questions ambiguities rather than making assumptions

**`@quality-reviewer-fidelity`** - Fidelity-preserving quality review
- Reviews against source specifications for exact compliance
- Security vulnerabilities and production readiness
- Performance analysis within specified scope
- Test coverage validation for specified requirements
- Prevents scope creep during review process

**`@fidelity-reviewer`** - Specification compliance validation  
- Compares implementations against original specifications
- Identifies missing requirements and scope additions
- Provides structured decision options for ambiguities
- Ensures 100% fidelity to source documents
- Used in spec-to-tasks conversion process

**`@technical-writer`** - Post-implementation documentation

- Creates concise, actionable documentation
- Focuses on practical usage patterns
- Maintains strict token limits for readability
- Documents actual behavior, not aspirational features

### Specialized Agents

**`@simplify-planner`** - Code complexity reduction

- Analyzes codebases for simplification opportunities
- Creates structured refactoring plans
- Identifies over-engineering and technical debt
- Generates risk-assessed improvement strategies

**`@debugger`** - Systematic issue analysis

- Evidence-based bug investigation
- Step-by-step debugging workflows
- Root cause analysis with clear action items
- Handles complex, hard-to-reproduce issues

**`@plan-architect`** - High-level system design

- NOTE: Uses `opus` model - higher cost
- Creates architectural plans from requirements
- Designs scalable system structures
- Plans integration strategies and data flows
- Focuses on long-term maintainability

## ğŸ› ï¸ Command Workflows

### 1. Documentation Fetch Workflow

**Fetch Library Documentation**:

```
/doc:fetch react                    # Fetch React documentation
/doc:fetch typescript --version 5.3 # Specific version
/doc:fetch lodash --sections api    # API reference only
/doc:fetch vue --update             # Update existing docs
/doc:fetch express --format minimal # Condensed format
```

### 2. Feature Development Workflow

**PRD-Based Development** (Standard workflow):

```
/prd:1:create-prd â†’ /prd:2:gen-tasks â†’ /3:process-tasks
```

**Specification-Based Development** (Direct from specs):

```
[Detailed Spec] â†’ /spec:2:gen-tasks â†’ /3:process-tasks
```

**Research-Based Development** (From research documents):

```
[Research Doc] â†’ /spec:1:create-spec â†’ /spec:2:gen-tasks â†’ /3:process-tasks
```

### 3. Code Quality Workflows

**Simplification Workflow**:

```
/simplify:create-plan â†’ @quality-reviewer â†’ /simplify:process-plan
```

## ğŸ”„ Usage Patterns

### Fetching Documentation

The `/doc:fetch` command transforms scattered online documentation into locally stored, AI-friendly Markdown files for enhanced Claude Code integration:

1. **Basic usage**:

   ```bash
   /doc:fetch react
   # Fetches React documentation to /workspace/docs/frameworks/react/
   ```

2. **Advanced options**:

   ```bash
   /doc:fetch typescript --version 5.3
   # Fetch specific version

   /doc:fetch lodash --sections api
   # Fetch only API reference sections

   /doc:fetch vue --update
   # Update existing documentation

   /doc:fetch express --format minimal
   # Use condensed format
   ```

3. **Generated structure**:

   ```
   /workspace/docs/
   â”œâ”€â”€ libraries/lodash/
   â”œâ”€â”€ frameworks/react/
   â””â”€â”€ languages/typescript/
       â”œâ”€â”€ index.md              # Overview and navigation
       â”œâ”€â”€ api-reference.md      # Complete API documentation  
       â”œâ”€â”€ best-practices.md     # Current patterns and conventions
       â””â”€â”€ examples/             # Code examples and tutorials
   ```

**Features:**
- **AI-Optimized**: Content processed by Technical Writer agent for Claude Code understanding
- **Self-Learning**: Automatically discovers and saves site patterns for future use
- **Quality Validation**: Comprehensive content analysis with completeness metrics
- **Error Recovery**: Robust retry logic with exponential backoff
- **Enhanced Fetching**: Smart handling of JavaScript-heavy documentation sites

### Creating New Features

1. **Start with requirements gathering**:

   ```bash
   /prd:1:create-prd
   # Follow interactive prompts to create detailed PRD
   ```

2. **Build out the task lists**:

   ```bash
   git checkout -b feature/new-feature # optional, claude should do this
   /prd:2:gen-tasks @path-to-prd.md
   # Generate parent tasks, review, and then say "Go" to build sub-tasks.
   # Should detect if you are on a branch and create one if not
   ```

3. **Process the implementation**:

   ```bash
   /3:process-tasks @path-to-task-list.md
   # Processes tasks one at a time with fidelity preservation

   # Or, if you want no confirmation prompts
   /3:process-tasks @path-to-task-list.md NOSUBCONF
   ```

4. **Generate documentation**:

   ```bash
   /doc:update
   # Creates user and technical documentation
   ```

### Working with Research

1. **Convert research to specification**:

   ```bash
   /spec:1:create-spec @research-idea-description.md
   # Converts research ideas into comprehensive specification documents
   ```

2. **Convert specification to tasks**:

   ```bash
   /spec:2:gen-tasks @research-spec-file.md
   # Converts specifications to detailed task lists with fidelity preservation
   ```

3. **Execute with full context**:

   ```bash
   /3:process-tasks @fidelity-task-list.md
   # Preserves all specification context during implementation
   ```

### Code Simplification

1. **Analyze for improvements**:

   ```bash
   /simplify:create-plan
   # Creates detailed simplification plan
   ```

2. **Review with quality agent**:

   ```bash
   @quality-reviewer @refactor-plan.md
   ```

3. **Execute approved changes**:

   ```bash
   /simplify:process-plan @refactor-task-list.md
   ```

## ğŸ“– Best Practices

### Git Workflow Requirements

- **Always work on feature branches** (never directly on main)
- **One sub-task at a time** unless `NOSUBCONF` is specified
- **Tests must pass** before any commits
- **Conventional commit format** is automatically applied

### Task Processing Guidelines

- Use `NOSUBCONF` parameter for batch processing when appropriate
- Provide clear, actionable task descriptions
- Break complex features into phases with clear boundaries
- Include test requirements in all implementation tasks

### Quality Standards

- All agents reference CLAUDE.md for project-specific standards
- Documentation is generated after implementation, not before

## ğŸ”Œ MCP Server Configuration

This repository includes pre-configured MCP (Model Context Protocol) server definitions.

### For Claude Code

MCP servers are defined in `claude/mcp-servers.json`. To use them:

1. **Project-level**: Installed automatically to `.claude/mcp-servers.json`
2. **Claude Desktop App**: Merge into `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS)
3. **Global Claude Code**: Ensure `enableAllProjectMcpServers: true` in `~/.claude/settings.json`

### For Codex

MCP servers are defined in `codex/mcp-servers.toml`. To use them:

1. **Merge into config**: Copy `[mcp_servers.*]` sections into your `~/.codex/config.toml`
2. **Project-level**: Add to project's `.codex/config.toml`

### Example MCP Servers

The repository includes the Playwright MCP server by default. Add more as needed:

```json
// Claude Code (JSON)
{
  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": ["-y", "@playwright/mcp@latest"]
    }
  }
}
```

```toml
# Codex (TOML)
[mcp_servers.playwright]
command = "npx"
args = ["-y", "@playwright/mcp@latest"]
```

## ğŸ“ Installation Notes

- **CLAUDE.md and CODEX.md are NOT installed** - Codex generates these files based on your project
- **Settings are preserved** - The update script never overwrites your local settings files
- **Source directories remain** - `agents/` and `commands/` are maintained as the source of truth
- **Both tools supported** - Install Claude Code, Codex, or both to the same project

## ğŸ“š Documentation

- **[CLAUDE.md](CLAUDE.md)** - Repository-specific guidance for Claude Code integration

---

**Need help?** Check the documentation files above, review `commands/README.md` for detailed workflow guidance, or use the specialized agents for specific tasks.
